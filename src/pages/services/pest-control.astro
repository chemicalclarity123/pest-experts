---
import ServicePage from '../../layouts/ServicePage.astro';
import { client } from '../../lib/apollo-client';
import { gql } from '@apollo/client';

// Example GraphQL query - adjust based on your Sanity schema
const GET_SERVICE = gql`
  query GetService($slug: String!) {
    allService(where: { slug: { current: { eq: $slug } } }) {
      _id
      title
      description
      serviceType
      areaServed
    }
  }
`;

// For static generation, you can fetch data at build time
// const { data } = await client.query({
//   query: GET_SERVICE,
//   variables: { slug: 'pest-control' },
// });

// Example static data for demonstration
const serviceData = {
  title: 'Professional Pest Control Services',
  description: 'Expert pest control solutions for residential and commercial properties',
  serviceName: 'Pest Control',
  serviceDescription: 'Comprehensive pest management services including inspection, treatment, and prevention for all types of pests.',
  serviceType: 'Pest Control Service',
  areaServed: 'Greater Metropolitan Area',
  businessName: 'Built For Speed Pest Experts',
  businessUrl: 'https://example.com',
  telephone: '+1-555-0123',
  email: 'info@example.com',
  address: {
    streetAddress: '123 Main Street',
    addressLocality: 'City',
    addressRegion: 'State',
    postalCode: '12345',
    addressCountry: 'US',
  },
  geo: {
    latitude: 40.7128,
    longitude: -74.0060,
  },
  openingHours: ['Mo-Fr 08:00-18:00', 'Sa 09:00-15:00'],
  priceRange: '$$',
};
---

<ServicePage {...serviceData}>
  <article>
    <header>
      <h1>{serviceData.serviceName}</h1>
      <p class="lead">{serviceData.serviceDescription}</p>
    </header>

    <section class="service-details">
      <h2>Our Services</h2>
      <p>
        We provide professional pest control services tailored to your specific needs.
        Our experienced technicians use safe, effective methods to eliminate pests
        and prevent future infestations.
      </p>

      <h3>Service Areas</h3>
      <p>Serving: {serviceData.areaServed}</p>

      <h3>Contact Information</h3>
      <ul>
        <li>Phone: <a href={`tel:${serviceData.telephone}`}>{serviceData.telephone}</a></li>
        <li>Email: <a href={`mailto:${serviceData.email}`}>{serviceData.email}</a></li>
        <li>
          Address: {serviceData.address.streetAddress}, 
          {serviceData.address.addressLocality}, 
          {serviceData.address.addressRegion} 
          {serviceData.address.postalCode}
        </li>
      </ul>

      <h3>Business Hours</h3>
      <ul>
        {serviceData.openingHours?.map((hours) => (
          <li>{hours}</li>
        ))}
      </ul>
    </section>
  </article>
</ServicePage>

<style>
  article {
    background: #fff;
    border-radius: 8px;
    padding: 2rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #e5e7eb;
  }

  h1 {
    font-size: 2.5rem;
    color: #1f2937;
    margin-bottom: 0.5rem;
  }

  .lead {
    font-size: 1.25rem;
    color: #6b7280;
  }

  .service-details {
    margin-top: 2rem;
  }

  h2 {
    font-size: 2rem;
    color: #1f2937;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  h3 {
    font-size: 1.5rem;
    color: #374151;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  p {
    margin-bottom: 1rem;
    color: #4b5563;
  }

  ul {
    list-style: none;
    padding-left: 0;
  }

  li {
    padding: 0.5rem 0;
    color: #4b5563;
  }

  a {
    color: #2563eb;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }
</style>
