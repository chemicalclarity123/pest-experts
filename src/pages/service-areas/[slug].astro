---
// src/pages/service-areas/[slug].astro
// PÃ¡ginas de Ã¡reas de servicio con contenido rico para SEO local y CRO
import Layout from '../../layouts/Layout.astro';
import ServicesGrid from '../../components/ServicesGrid.astro';
import Testimonials from '../../components/Testimonials.astro';
import LeadFormCompact from '../../components/LeadFormCompact.astro';
import WhyChooseUs from '../../components/WhyChooseUs.astro';
import WhatsAppWidget from '../../components/WhatsAppWidget.astro';
import Footer from '../../components/Footer.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import { PortableText } from "astro-portabletext";
import { 
  fetchServiceAreas, 
  fetchServiceAreaBySlug, 
  fetchCompanySettings, 
  fetchServices,
  fetchHomepage,
  urlFor 
} from '../../lib/sanity-client';
import { generateLocalBusinessSchema, generateFAQSchema } from '../../lib/schema';

// Generar rutas estÃ¡ticas desde Sanity
export async function getStaticPaths() {
  const areas = await fetchServiceAreas();
  return areas.map((area: any) => ({
    params: { slug: area.slug },
  }));
}

const { slug } = Astro.params;

// Obtener datos completos del Ã¡rea y datos compartidos â€” en paralelo
const [area, companySettings, services, homepage] = await Promise.all([
  fetchServiceAreaBySlug(slug as string),
  fetchCompanySettings(),
  fetchServices(),
  fetchHomepage(),
]);

// Redirigir si no existe
if (!area) {
  return Astro.redirect('/404');
}

const areaName = area.title;
const phone = companySettings?.contactInfo?.telephone || "+27 12 345 6789";
const whatsappNumber = companySettings?.contactInfo?.whatsapp || "+27123456789";

// Imagen del hero con fallback (Optimized for Mobile/Desktop)
const heroImageDesktop = area.image?.asset 
  ? urlFor(area.image).width(1920).height(800).format('webp').url() 
  : '/images/hero-bg.jpg';

const heroImageMobile = area.image?.asset 
  ? urlFor(area.image).width(800).height(1000).format('webp').url() 
  : '/images/hero-bg.jpg';

// SubtÃ­tulo del hero con cadena de fallbacks
const heroSubheading = area.heroSubheading 
  || area.description 
  || `Professional, licensed, and insured pest control experts serving ${areaName} and surrounding areas.`;

// Revisar: preferir seleccionadas manualmente, fallback a reviews globales
const reviewsToDisplay = area.selectedReviews?.length > 0
  ? { title: `What ${areaName} Customers Say`, reviews: [], googleReviews: area.selectedReviews }
  : { title: "What Our Customers Say", reviews: [], googleReviews: companySettings?.googleReviews };

// Features: Ã¡rea-especÃ­ficas o fallback a homepage
const whyChooseFeatures = area.serviceHighlights?.length > 0
  ? area.serviceHighlights
  : homepage?.whyChooseUs?.features;

const whyChooseTitle = area.serviceHighlights?.length > 0
  ? `Why Choose Us in ${areaName}`
  : homepage?.whyChooseUs?.title || "Why Choose Us";

// CTA inferior con fallbacks
const ctaHeading = area.ctaHeading || `Ready to Solve Your Pest Problem in ${areaName}?`;
const ctaDescription = area.ctaDescription || `Get fast, professional pest control in ${areaName}. Our licensed experts respond within 1 hour.`;

// Schema.org â€” LocalBusiness con datos del Ã¡rea
const businessSchema = generateLocalBusinessSchema({
  name: `${companySettings?.businessName || "Pest Experts"} â€” ${areaName}`,
  description: area.seo?.metaDescription || `Professional pest control services in ${areaName}, Gauteng. Fast response, guaranteed results.`,
  url: Astro.url.href,
  logo: companySettings?.logo,
  telephone: phone,
  email: companySettings?.contactInfo?.email,
  address: companySettings?.address ? {
    ...companySettings.address,
    addressLocality: areaName
  } : undefined,
  geo: companySettings?.geo,
  areaServed: [areaName],
  priceRange: companySettings?.priceRange,
  aggregateRating: companySettings?.aggregateRating,
  sameAs: companySettings?.sameAs?.map((p: any) => p.url),
});

// Breadcrumbs
const breadcrumbItems = [
  { name: 'Home', item: Astro.site?.toString() || '/' },
  { name: 'Service Areas', item: new URL('/service-areas', Astro.site || 'https://built-for-speed.pages.dev').href },
  { name: areaName, item: Astro.url.href }
];

/* El componente Breadcrumbs ya genera su propio JSON-LD, asÃ­ que solo se pasa el schema de negocio */
const schemaMarkup = [businessSchema];
---

<Layout 
  seo={area.seo}
  title={`Pest Control ${areaName} | Licensed Experts | Built For Speed`}
  description={`Professional pest control in ${areaName}. Fast response, guaranteed results. Licensed & insured.`}
  schemaMarkup={schemaMarkup}
>
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       1. HERO â€” H1 + LeadFormCompact
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="hero-section">
    <div class="hero-bg">
      <picture>
        <source media="(min-width: 768px)" srcset={heroImageDesktop} />
        <img src={heroImageMobile} alt={`Pest control services in ${areaName}`} class="hero-image" fetchpriority="high" decoding="sync" />
      </picture>
      <div class="hero-overlay"></div>
    </div>

    <div class="content-container hero-container">
      <!-- Columna izquierda: contenido -->
      <div class="hero-content">
        <Breadcrumbs items={breadcrumbItems} />

        <h1 class="hero-title">
          Pest Control in <span class="highlight">{areaName}</span>
        </h1>
        <p class="hero-subtitle">{heroSubheading}</p>

        <!-- Trust badges â€” seÃ±ales de confianza inmediatas -->
        <div class="trust-badges">
          <div class="badge">
            <svg class="badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
            <span>Licensed & Insured</span>
          </div>
          <div class="badge">
            <svg class="badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>1-Hour Response</span>
          </div>
          <div class="badge">
            <svg class="badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
            </svg>
            <span>Guaranteed Results</span>
          </div>
        </div>

        <!-- CTAs â€” telÃ©fono y scroll al formulario -->
        <div class="hero-cta-buttons">
          <a href={`tel:${phone.replace(/\s+/g, '')}`} class="cta-primary" data-gtm="click_to_call" onclick="window.dataLayer && window.dataLayer.push({event:'click_to_call'})">
            <svg class="cta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            Call {phone}
          </a>
          <a href="#lead-form" class="cta-secondary">Get a Free Quote</a>
        </div>
      </div>

      <!-- Columna derecha: formulario reutilizado -->
      <div class="hero-form-wrapper" id="lead-form">
        <LeadFormCompact 
          title={`Get a Quote in ${areaName}`}
          description="Fast response across Gauteng"
          source={`area_${slug}`}
          formId="areaHeroForm"
        />
        <!-- Stats rÃ¡pidas debajo del formulario -->
        <div class="quick-stats">
          <div class="stat">
            <div class="stat-value" style="display: flex; align-items: center; justify-content: center; gap: 6px;">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20px" height="20px">
                <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
                <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
                <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/>
                <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
              </svg>
              4.8 <span style="color: #FFC107;">â˜…</span>
            </div>
            <div class="stat-label">Google Rating</div>
          </div>
          <div class="stat">
            <div class="stat-value">{new Date().getFullYear() - 2004}<span style="color: #FFC107;">+</span></div>
            <div class="stat-label">Years Experience</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       1.5 PREMIUM AREA INTRO (AESTHETIC UPGRADE)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  {(area.introHeadline || area.introBodyText) && (
    <section class="relative pt-20 pb-12 lg:pt-32 lg:pb-16 overflow-x-clip bg-gradient-to-b from-white to-gray-50/50">
      
      {/* Decorative Background Elements */}
      <div class="absolute top-0 right-0 w-1/2 h-full bg-green-50/30 transform -skew-x-12 translate-x-32 hidden lg:block -z-10"></div>
      <div class="absolute -top-24 -left-24 w-96 h-96 bg-green-100/40 rounded-full blur-3xl opacity-60 -z-10 pointer-events-none"></div>
      <div class="absolute bottom-0 right-0 w-full max-w-lg h-96 bg-yellow-100/30 rounded-full blur-3xl opacity-50 -z-10 pointer-events-none"></div>

      <div class="content-container">
        
        <div class="flex flex-col lg:flex-row gap-12 lg:gap-20">
          
          {/* Main Text Content Column */}
          <div class="w-full lg:w-3/5 text-left">
            {/* Trust Signal Badge */}
            <div class="inline-flex items-center gap-2 px-5 py-2 rounded-full bg-green-50 border border-green-100 text-sm font-bold text-green-900 mb-8 shadow-sm transition-transform hover:scale-105">
              <span class="flex items-center justify-center w-6 h-6 rounded-full bg-white shadow-sm text-base">ğŸ“</span> 
              <span class="tracking-wide uppercase text-xs">Local Experts in {areaName}</span>
            </div>

            {area.introHeadline && (
              <h2 class="section-heading text-left mt-0 mb-6">
                {area.introHeadline}
              </h2>
            )}
            
            {area.introShortDescription && (
              <p class="section-subtext text-left mb-8 border-l-4 border-green-600 pl-6 rounded-sm">
                {area.introShortDescription}
              </p>
            )}

            {area.introBodyText && (
              <div class="prose prose-lg prose-green area-intro-prose max-w-none text-gray-600">
                <PortableText value={area.introBodyText} />
              </div>
            )}

            {/* Premium Dynamic CTA Button */}
            <div class="mt-12">
              <a href="#lead-form" class="premium-cta group inline-flex items-center gap-4 bg-green-700 hover:bg-green-800 text-white px-8 py-4.5 rounded-xl font-bold text-lg transition-all duration-300 shadow-[0_8px_30px_rgb(21,128,61,0.25)] hover:shadow-[0_8px_30px_rgb(21,128,61,0.4)] hover:-translate-y-1">
                <span>Protect Your Property Today</span>
                <span class="flex items-center justify-center w-8 h-8 rounded-full bg-white/20 group-hover:bg-white/30 transition-colors">
                  <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300 relative left-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                </span>
              </a>
            </div>
          </div>

          {/* Visual Highlight/Stats Column */}
          <div class="w-full lg:w-2/5 mt-10 lg:mt-0 relative">
            <div class="relative bg-white rounded-3xl p-8 lg:p-10 shadow-[0_20px_50px_-12px_rgba(0,0,0,0.1)] border border-gray-100 z-10 sticky top-32">
              <div class="absolute -top-6 -right-6 w-24 h-24 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg transform rotate-12 z-20">
                <span class="text-white text-3xl font-black">24/7</span>
              </div>
              
              <h3 class="text-2xl font-bold text-gray-900 mb-6 border-b border-gray-100 pb-4">
                {whyChooseTitle || `Why choose Pest Experts in ${areaName}?`}
              </h3>
              
              <ul class="space-y-6">
                {whyChooseFeatures && whyChooseFeatures.slice(0, 4).map((feature: any) => (
                  <li class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-12 h-12 rounded-full bg-green-50 flex items-center justify-center text-green-600 mt-1">
                      {/* Check mark fallback if no icon is specified in CMS */}
                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                    </div>
                    <div>
                      <strong class="block text-gray-900 text-lg mb-1">{feature.title}</strong>
                      <p class="text-gray-600 leading-snug">{feature.description}</p>
                    </div>
                  </li>
                ))}
              </ul>
            </div>
            
            {/* Background decorative square behind the card */}
            <div class="absolute inset-0 bg-green-700/5 rounded-3xl transform translate-x-4 translate-y-4 -z-10"></div>
          </div>
        </div>

      </div>
    </section>
  )}

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       2. SERVICES AVAILABLE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="section-spacing">
    <div class="content-container">
      <h2 class="section-heading">Services Available in {areaName}</h2>
      <p class="section-subtext">
        We provide comprehensive pest control solutions across {areaName} and surrounding areas.
      </p>
      <ServicesGrid services={services} />
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       3. COMMON PESTS â€” contenido local para keywords
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  {area.localPests && area.localPests.length > 0 && (
    <section class="section-spacing bg-light">
      <div class="content-container">
        <h2 class="section-heading">Common Pests in {areaName}</h2>
        <p class="section-subtext">
          These pests are frequently found in {areaName} due to the local climate and environment.
        </p>
        <div class="pest-grid">
          {area.localPests.map((pest: any) => (
            <div class="pest-card">
              <div class="pest-icon-wrapper">
                <span class="pest-icon-emoji">ğŸª²</span>
              </div>
              <h3 class="pest-name">{pest.name}</h3>
              {pest.description && (
                <p class="pest-description">{pest.description}</p>
              )}
              <a href="#lead-form" class="pest-cta">Get Treatment â†’</a>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       4. WHY LOCAL â€” Portable Text con contexto local
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  {area.whyLocal?.body && (
    <section class="section-spacing">
      <div class="content-container">
        <div class="why-local-section">
          <h2 class="section-heading">
            {area.whyLocal.title || `Why ${areaName} Needs Professional Pest Control`}
          </h2>
          <div class="prose">
            <PortableText value={area.whyLocal.body} />
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       5. ADDITIONAL CONTENT â€” bloque rico opcional
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  {area.content && (
    <section class="section-spacing bg-light">
      <div class="content-container">
        <div class="prose">
          <PortableText value={area.content} />
        </div>
      </div>
    </section>
  )}

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       6. WHY CHOOSE US â€” features dinÃ¡micas o homepage fallback
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <WhyChooseUs 
    title={whyChooseTitle}
    features={whyChooseFeatures}
  />

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       7. TESTIMONIALS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <Testimonials 
    title={reviewsToDisplay.title}
    googleReviews={reviewsToDisplay.googleReviews}
    reviews={[]}
  />

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       8. NEARBY AREAS â€” internal linking para SEO
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  {area.nearbyAreas && area.nearbyAreas.length > 0 && (
    <section class="section-spacing">
      <div class="content-container">
        <h2 class="section-heading">We Also Serve Areas Near {areaName}</h2>
        <div class="areas-grid">
          {area.nearbyAreas.map((nearby: any) => (
            <a href={`/service-areas/${nearby.slug}/`} class="area-card">
              <div class="area-card-content">
                <span class="area-name">{nearby.title}</span>
                {nearby.description && (
                  <span class="area-desc">{nearby.description}</span>
                )}
              </div>
              <span class="area-arrow">â†’</span>
            </a>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       9. BOTTOM CTA â€” segunda oportunidad de conversiÃ³n
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="bottom-cta-section">
    <div class="content-container">
      <div class="bottom-cta-grid">
        <div class="bottom-cta-text">
          <h2 class="bottom-cta-heading">{ctaHeading}</h2>
          <p class="bottom-cta-description">{ctaDescription}</p>
          <div class="bottom-cta-trust">
            <div class="trust-item">âœ… No obligation quote</div>
            <div class="trust-item">âœ… Same-day service available</div>
            <div class="trust-item">âœ… 6-month treatment guarantee</div>
          </div>
        </div>
        <div class="bottom-cta-form">
          <LeadFormCompact 
            title="Get Your Free Quote"
            description={`Serving ${areaName} & surrounds`}
            source={`area_${slug}_bottom`}
            formId="areaBottomForm"
          />
        </div>
      </div>
    </div>
  </section>

  <WhatsAppWidget 
    phoneNumber={whatsappNumber}
    message={`Hi! I need pest control in ${areaName}.`}
  />

  <Footer companyData={companySettings} servicesData={services} />
</Layout>

<style>
  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HERO SECTION
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .hero-section {
    position: relative;
    min-height: auto;
    display: flex;
    align-items: center;
    padding: 4rem 0 3rem;
    overflow: hidden;
  }

  .hero-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .hero-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.5) 100%);
  }

  .hero-container {
    position: relative;
    z-index: 10;
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    gap: 2.5rem;
    align-items: start;
  }

  .hero-content {
    color: white;
    background: rgba(0, 0, 0, 0.4);
    padding: 2rem;
    border-radius: 16px;
    backdrop-filter: blur(10px);
  }

  .hero-title {
    font-size: 2.5rem;
    font-weight: 800;
    line-height: 1.1;
    margin-bottom: 0.75rem;
    color: white;
  }

  .highlight {
    color: #fbbf24;
  }

  .hero-subtitle {
    font-size: 1.05rem;
    line-height: 1.5;
    color: white;
    margin-bottom: 1.25rem;
  }

  /* Trust badges */
  .trust-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1.25rem;
  }

  .badge {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.95);
  }

  .badge-icon {
    width: 20px;
    height: 20px;
    color: #fbbf24;
  }

  /* CTA Buttons */
  .hero-cta-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .cta-primary,
  .cta-secondary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    border-radius: 12px;
    font-weight: 700;
    font-size: 1.1rem;
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .cta-primary {
    background: white;
    color: #2b6b2a;
  }

  .cta-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
  }

  .cta-secondary {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: 2px solid white;
    backdrop-filter: blur(10px);
  }

  .cta-secondary:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
  }

  .cta-icon {
    width: 20px;
    height: 20px;
  }

  /* Hero form */
  .hero-form-wrapper {
    position: sticky;
    top: 2rem;
  }

  .quick-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .stat {
    background: white;
    padding: 1rem;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: #2b6b2a;
    margin-bottom: 0.25rem;
  }

  .stat-label {
    font-size: 0.75rem;
    color: #6b7280;
    font-weight: 600;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SHARED SECTION STYLES
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .section-spacing {
    padding: 5rem 0;
  }

  .bg-light {
    background: #f9fafb;
  }

  .section-heading {
    font-size: 2.25rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #1d5f20 0%, #2d7a30 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .section-subtext {
    text-align: center;
    color: #6b7280;
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto 3rem;
    line-height: 1.6;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     COMMON PESTS â€” tarjetas locales
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .pest-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.5rem;
  }

  .pest-card {
    background: white;
    padding: 2rem;
    border-radius: 16px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: center;
  }

  .pest-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(29, 95, 32, 0.12);
    border-color: #2b6b2a;
  }

  .pest-icon-wrapper {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, rgba(29, 95, 32, 0.1) 0%, rgba(45, 122, 48, 0.15) 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.25rem;
    transition: all 0.3s;
  }

  .pest-card:hover .pest-icon-wrapper {
    background: linear-gradient(135deg, #1d5f20 0%, #2d7a30 100%);
    transform: scale(1.1);
  }

  .pest-icon-emoji {
    font-size: 1.75rem;
    transition: filter 0.3s;
  }

  .pest-card:hover .pest-icon-emoji {
    filter: brightness(10);
  }

  .pest-name {
    font-size: 1.25rem;
    font-weight: 700;
    color: #2b6b2a;
    margin-bottom: 0.75rem;
  }

  .pest-description {
    color: #6b7280;
    line-height: 1.6;
    font-size: 0.95rem;
    margin-bottom: 1.25rem;
  }

  .pest-cta {
    color: #2b6b2a;
    font-weight: 600;
    text-decoration: none;
    font-size: 0.9rem;
    transition: all 0.2s;
    display: inline-block;
  }

  .pest-cta:hover {
    color: #15803d;
    transform: translateX(4px);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     WHY LOCAL â€” Portable Text styling
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .why-local-section {
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    border: 1px solid #e5e7eb;
  }

  .prose {
    color: #374151;
    line-height: 1.8;
    font-size: 1.05rem;
  }

  .prose :global(p) {
    margin-bottom: 1.25rem;
  }

  .prose :global(h3) {
    font-size: 1.5rem;
    font-weight: 700;
    color: #2b6b2a;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  .prose :global(ul) {
    list-style-type: disc;
    padding-left: 1.625rem;
    margin-bottom: 1.25rem;
  }

  .prose :global(li) {
    margin-bottom: 0.5rem;
  }

  .prose :global(strong) {
    font-weight: 600;
    color: #1f2937;
  }

  /* Premium Intro Card Styles */
  .premium-intro-card {
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0,0,0,0.02);
    transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
  }
  .premium-intro-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 30px 60px -20px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(0,0,0,0.03);
  }

  .area-intro-prose :global(h1),
  .area-intro-prose :global(h2),
  .area-intro-prose :global(h3),
  .area-intro-prose :global(h4),
  .area-intro-prose :global(h5),
  .area-intro-prose :global(h6),
  .area-intro-prose :global(p) {
    text-align: center;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NEARBY AREAS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .areas-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 1.5rem;
  }

  .area-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    text-decoration: none;
    color: #1f2937;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .area-card:hover {
    border-color: #2b6b2a;
    box-shadow: 0 8px 16px rgba(43, 107, 42, 0.12);
    transform: translateY(-2px);
  }

  .area-card-content {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .area-name {
    font-weight: 600;
    font-size: 1.05rem;
    color: #1f2937;
  }

  .area-card:hover .area-name {
    color: #2b6b2a;
  }

  .area-desc {
    font-size: 0.8rem;
    color: #9ca3af;
  }

  .area-arrow {
    font-size: 1.25rem;
    color: #d1d5db;
    transition: all 0.2s;
  }

  .area-card:hover .area-arrow {
    color: #2b6b2a;
    transform: translateX(4px);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BOTTOM CTA â€” segunda conversiÃ³n
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .bottom-cta-section {
    background: linear-gradient(135deg, #1d5f20 0%, #0f4a12 100%);
    padding: 5rem 0;
    color: white;
  }

  .bottom-cta-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
  }

  .bottom-cta-heading {
    font-size: 2.25rem;
    font-weight: 800;
    color: white;
    line-height: 1.2;
    margin-bottom: 1rem;
  }

  .bottom-cta-description {
    font-size: 1.1rem;
    color: white;
    line-height: 1.6;
    margin-bottom: 2rem;
  }

  .bottom-cta-trust {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .trust-item {
    font-size: 1rem;
    font-weight: 500;
    color: white;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RESPONSIVE
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @media (max-width: 1023px) {
    .hero-section {
      min-height: auto;
      padding: 4rem 0;
    }

    .hero-container {
      grid-template-columns: 1fr;
    }

    .hero-form-wrapper {
      position: static;
    }

    .bottom-cta-grid {
      grid-template-columns: 1fr;
      gap: 3rem;
    }
  }

  @media (max-width: 640px) {
    .hero-title {
      font-size: 2rem;
    }

    .hero-subtitle {
      font-size: 1.05rem;
    }

    .trust-badges {
      gap: 0.75rem;
    }

    .badge {
      font-size: 0.8rem;
    }

    .cta-primary,
    .cta-secondary {
      width: 100%;
      justify-content: center;
      padding: 0.875rem 1.5rem;
      font-size: 1rem;
    }

    .section-heading {
      font-size: 1.75rem;
    }

    .section-spacing {
      padding: 3rem 0;
    }

    .bottom-cta-heading {
      font-size: 1.75rem;
    }

    .pest-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
