---
// src/layouts/Layout.astro
// Base layout with centralized SEO management
import Navbar from '../components/Navbar.astro';
import Seo from '../components/Seo.astro';
import '../styles/global.css';

interface Props {
	title?: string;
	description?: string;
	seo?: any;
	schemaMarkup?: any | any[];
	ogImage?: string; // Legacy support
	canonicalUrl?: string; // Legacy support
}

const { 
	title, 
	description,
	seo,
	schemaMarkup,
	ogImage,
	canonicalUrl
} = Astro.props;

// Prepare SEO object from both new and legacy props
const seoData = seo || {
	metaTitle: title,
	metaDescription: description,
	shareImage: ogImage,
	canonicalUrl: canonicalUrl
};
---

<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width" />
	<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	
	<Seo 
		title={title}
		description={description}
		seo={seoData}
		schemaMarkup={schemaMarkup}
	/>
	
	<!-- Additional head content -->
	<slot name="head" />
</head>
<body>
	<Navbar />
	<main>
		<slot />
	</main>
	<slot name="footer" />
</body>
</html>

<style is:global>
	* {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	/* Global Reset */
	html {
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
        height: 100%;
        overscroll-behavior-y: none; /* Prevent rubber-banding */
	}

	body {
		margin: 0;
		padding: 0;
		color: #1f2937;
		background: white;
		line-height: 1.5;
		min-height: 100%; /* Ensure body fills at least the html height */
		display: flex;
		flex-direction: column;
        position: relative;
        overflow-x: hidden; /* Prevent horizontal overflow here */
	}

	/* Main Content Wrapper */
	main {
		flex: 1 0 auto;
		width: 100%;
		display: flex;
		flex-direction: column;
	}

    /* Remove previous body block override if present below or merge */
</style>
